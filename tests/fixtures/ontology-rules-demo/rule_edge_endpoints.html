<!DOCTYPE html>
<html>
<head>
    <title>Ontology Rule Demo: Edge Endpoint Types</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 40px; background: #f5f5f5; }
        h1 { color: #2c3e50; }
        h2 { color: #34495e; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .demo { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .pass { border-left: 4px solid #27ae60; }
        .fail { border-left: 4px solid #e74c3c; }
        .status { font-weight: bold; font-size: 1.2em; }
        .status.pass { color: #27ae60; }
        .status.fail { color: #e74c3c; }
        .description { color: #7f8c8d; font-style: italic; margin: 10px 0; }
        .explanation { background: #ecf0f1; padding: 15px; border-radius: 4px; margin: 15px 0; }
        .violations { background: #fdedec; padding: 15px; border-radius: 4px; margin: 15px 0; }
        .violations h4 { color: #c0392b; margin-top: 0; }
        .graph { margin: 20px 0; padding: 20px; background: #fff; border: 1px solid #ddd; border-radius: 4px; }
        .vertex { fill: #3498db; stroke: white; stroke-width: 2; }
        .vertex.spec { fill: #27ae60; }
        .vertex.guidance { fill: #f39c12; }
        .vertex.signer { fill: #9b59b6; }
        .edge { stroke: #95a5a6; stroke-width: 2; }
        .edge.verification { stroke: #3498db; }
        .edge.validation { stroke: #e74c3c; }
        .edge.coupling { stroke: #9b59b6; stroke-dasharray: 5,5; }
        .edge.invalid { stroke: #e74c3c; stroke-width: 3; }
        .label { font-size: 12px; fill: #2c3e50; }
        code { background: #ecf0f1; padding: 2px 6px; border-radius: 3px; font-family: 'Fira Code', monospace; }
        .summary { background: #d5dbdb; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
    </style>
</head>
<body>
    <h1>Ontology Rule Demonstration: Edge Endpoint Types</h1>

    <div class="summary">
        <strong>Summary:</strong> 6/6 demonstrations passed
    </div>

    <div class="demo pass">
        <h2>Demo 1: Valid Verification Edge</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">doc → spec (CORRECT)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="285.0,100.0 275.0,105.0 275.0,95.0" fill="#666"/>
<line x1="100" y1="100" x2="285.0" y2="100.0" class="edge verification"/>
<text x="192.5" y="90.0" class="label" text-anchor="middle" font-size="10">verification</text>
<circle cx="100" cy="100" r="20" class="vertex"/>
<text x="100" y="105" class="label" text-anchor="middle">doc</text>
<circle cx="300" cy="100" r="20" class="vertex spec"/>
<text x="300" y="105" class="label" text-anchor="middle">spec</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Verification edges go from a document/spec/guidance/module to a spec. Here doc → spec is valid.
        </div>

        <p>
            <strong>Expected violations:</strong> 0<br>
            <strong>Actual violations:</strong> 0
        </p>
    </div>

    <div class="demo pass">
        <h2>Demo 2: Invalid Verification Edge - Wrong Source</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">signer → spec (WRONG: signer not allowed as verification source)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="285.0,100.0 275.0,105.0 275.0,95.0" fill="#666"/>
<line x1="100" y1="100" x2="285.0" y2="100.0" class="edge verification"/>
<text x="192.5" y="90.0" class="label" text-anchor="middle" font-size="10">verification</text>
<circle cx="100" cy="100" r="20" class="vertex signer"/>
<text x="100" y="105" class="label" text-anchor="middle">signer</text>
<circle cx="300" cy="100" r="20" class="vertex spec"/>
<text x="300" y="105" class="label" text-anchor="middle">spec</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Verification edges must originate from doc/spec/guidance/module. A SIGNER cannot be a verification source.
        </div>

        <p>
            <strong>Expected violations:</strong> 1<br>
            <strong>Actual violations:</strong> 1
        </p>

        <div class="violations">
            <h4>Violations Found:</h4>
            <ul>
                <li><code>[ERROR] edge_endpoint_type_compliance: Source vertex type 'vertex/signer' not allowed for verification edge (e:verification:bad)</code></li>

            </ul>
        </div>
    </div>

    <div class="demo pass">
        <h2>Demo 3: Invalid Verification Edge - Wrong Target</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">doc → guidance (WRONG: target should be spec)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="285.0,100.0 275.0,105.0 275.0,95.0" fill="#666"/>
<line x1="100" y1="100" x2="285.0" y2="100.0" class="edge verification"/>
<text x="192.5" y="90.0" class="label" text-anchor="middle" font-size="10">verification</text>
<circle cx="100" cy="100" r="20" class="vertex"/>
<text x="100" y="105" class="label" text-anchor="middle">doc</text>
<circle cx="300" cy="100" r="20" class="vertex guidance"/>
<text x="300" y="105" class="label" text-anchor="middle">guidance</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> This verification edge targets GUIDANCE, but verification must target a SPECIFICATION.
        </div>

        <p>
            <strong>Expected violations:</strong> 1<br>
            <strong>Actual violations:</strong> 1
        </p>

        <div class="violations">
            <h4>Violations Found:</h4>
            <ul>
                <li><code>[ERROR] edge_endpoint_type_compliance: Target vertex type 'vertex/guidance' not allowed for verification edge (e:verification:bad)</code></li>

            </ul>
        </div>
    </div>

    <div class="demo pass">
        <h2>Demo 4: Valid Validation Edge</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">doc → guidance (CORRECT)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="285.0,100.0 275.0,105.0 275.0,95.0" fill="#666"/>
<line x1="100" y1="100" x2="285.0" y2="100.0" class="edge validation"/>
<text x="192.5" y="90.0" class="label" text-anchor="middle" font-size="10">validation</text>
<circle cx="100" cy="100" r="20" class="vertex"/>
<text x="100" y="105" class="label" text-anchor="middle">doc</text>
<circle cx="300" cy="100" r="20" class="vertex guidance"/>
<text x="300" y="105" class="label" text-anchor="middle">guidance</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Validation edges go from document to guidance - human assessment of fitness for purpose.
        </div>

        <p>
            <strong>Expected violations:</strong> 0<br>
            <strong>Actual violations:</strong> 0
        </p>
    </div>

    <div class="demo pass">
        <h2>Demo 5: Valid Coupling Edge</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">spec ↔ guidance (CORRECT - undirected)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<line x1="100" y1="100" x2="300" y2="100" class="edge coupling"/>
<text x="200.0" y="90.0" class="label" text-anchor="middle" font-size="10">coupling</text>
<circle cx="100" cy="100" r="20" class="vertex spec"/>
<text x="100" y="105" class="label" text-anchor="middle">spec</text>
<circle cx="300" cy="100" r="20" class="vertex guidance"/>
<text x="300" y="105" class="label" text-anchor="middle">guidance</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Coupling edges connect a spec to its corresponding guidance (1:1 relationship).
        </div>

        <p>
            <strong>Expected violations:</strong> 0<br>
            <strong>Actual violations:</strong> 0
        </p>
    </div>

    <div class="demo pass">
        <h2>Demo 6: Invalid Signs Edge - Wrong Source</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">doc → doc (WRONG: source should be signer)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="285.0,100.0 275.0,105.0 275.0,95.0" fill="#666"/>
<line x1="100" y1="100" x2="285.0" y2="100.0" class="edge"/>
<text x="192.5" y="90.0" class="label" text-anchor="middle" font-size="10">signs</text>
<circle cx="100" cy="100" r="20" class="vertex"/>
<text x="100" y="105" class="label" text-anchor="middle">doc</text>
<circle cx="300" cy="100" r="20" class="vertex"/>
<text x="300" y="105" class="label" text-anchor="middle">doc</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Signs edges must originate from a SIGNER (human accountable party), not a document.
        </div>

        <p>
            <strong>Expected violations:</strong> 1<br>
            <strong>Actual violations:</strong> 1
        </p>

        <div class="violations">
            <h4>Violations Found:</h4>
            <ul>
                <li><code>[ERROR] edge_endpoint_type_compliance: Source vertex type 'vertex/doc' not allowed for signs edge (e:signs:bad)</code></li>

            </ul>
        </div>
    </div>

</body>
</html>
