<!DOCTYPE html>
<html>
<head>
    <title>Ontology Rule Demo: Role Assignment Chain (ARBAC97: role-assignment → assignment-signature)</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 40px; background: #f5f5f5; }
        h1 { color: #2c3e50; }
        h2 { color: #34495e; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .demo { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .pass { border-left: 4px solid #27ae60; }
        .fail { border-left: 4px solid #e74c3c; }
        .status { font-weight: bold; font-size: 1.2em; }
        .status.pass { color: #27ae60; }
        .status.fail { color: #e74c3c; }
        .description { color: #7f8c8d; font-style: italic; margin: 10px 0; }
        .explanation { background: #ecf0f1; padding: 15px; border-radius: 4px; margin: 15px 0; }
        .violations { background: #fdedec; padding: 15px; border-radius: 4px; margin: 15px 0; }
        .violations h4 { color: #c0392b; margin-top: 0; }
        .graph { margin: 20px 0; padding: 20px; background: #fff; border: 1px solid #ddd; border-radius: 4px; }
        .vertex { fill: #3498db; stroke: white; stroke-width: 2; }
        .vertex.spec { fill: #27ae60; }
        .vertex.guidance { fill: #f39c12; }
        .vertex.signer { fill: #9b59b6; }
        .edge { stroke: #95a5a6; stroke-width: 2; }
        .edge.verification { stroke: #3498db; }
        .edge.validation { stroke: #e74c3c; }
        .edge.coupling { stroke: #9b59b6; stroke-dasharray: 5,5; }
        .edge.invalid { stroke: #e74c3c; stroke-width: 3; }
        .label { font-size: 12px; fill: #2c3e50; }
        code { background: #ecf0f1; padding: 2px 6px; border-radius: 3px; font-family: 'Fira Code', monospace; }
        .summary { background: #d5dbdb; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
    </style>
</head>
<body>
    <h1>Ontology Rule Demonstration: Role Assignment Chain (ARBAC97: role-assignment → assignment-signature)</h1>

    <div class="summary">
        <strong>Summary:</strong> 5/5 demonstrations passed
    </div>

    <div class="demo pass">
        <h2>Demo 1: Valid: Role-Assignment Face (Admin Can Assign Target Role)</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">Role-assignment face with has-role, conveys, can-assign edges - admin has authority to assign a role</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="279.1025403784439,187.00961894323342 269.7724133595217,180.84936490538902 278.4326673973661,175.84936490538902" fill="#666"/>
<line x1="200.0" y1="50.0" x2="279.1025403784439" y2="187.00961894323342" class="edge"/>
<text x="239.55127018922195" y="108.50480947161671" class="label" text-anchor="middle" font-size="10">has-role</text>
<polygon points="128.39745962155615,200.00000000000003 138.39745962155615,195.00000000000003 138.39745962155615,205.00000000000003" fill="#666"/>
<line x1="286.6025403784439" y1="200.0" x2="128.39745962155615" y2="200.00000000000003" class="edge"/>
<text x="207.50000000000003" y="190.0" class="label" text-anchor="middle" font-size="10">conveys</text>
<polygon points="120.89745962155615,187.00961894323345 121.56733260263395,175.84936490538905 130.22758664047834,180.84936490538905" fill="#666"/>
<line x1="200.0" y1="50.0" x2="120.89745962155615" y2="187.00961894323345" class="edge"/>
<text x="160.44872981077808" y="108.50480947161672" class="label" text-anchor="middle" font-size="10">can-assign</text>
<circle cx="200.0" cy="50.0" r="20" class="vertex"/>
<text x="200.0" y="55.0" class="label" text-anchor="middle">actor</text>
<circle cx="286.6025403784439" cy="200.0" r="20" class="vertex"/>
<text x="286.6025403784439" y="205.0" class="label" text-anchor="middle">role</text>
<circle cx="113.39745962155615" cy="200.00000000000003" r="20" class="vertex"/>
<text x="113.39745962155615" y="205.00000000000003" class="label" text-anchor="middle">role</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Role-assignment face proves that admin-role conveys authority to assign target-role. The admin holds admin-role (has-role), which conveys assignment authority (conveys → role), giving the admin can-assign authority.
        </div>

        <p>
            <strong>Expected violations:</strong> 0<br>
            <strong>Actual violations:</strong> 0
        </p>
    </div>

    <div class="demo pass">
        <h2>Demo 2: Valid: Role-Assignment + Assignment-Signature (Complete Chain)</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">Role-assignment face with assignment-signature sharing can-assign edge</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="289.3933982822018,139.3933982822018 278.78679656440363,135.85786437626905 285.85786437626905,128.78679656440357" fill="#666"/>
<line x1="200.0" y1="50.0" x2="289.3933982822018" y2="139.3933982822018" class="edge"/>
<text x="244.6966991411009" y="84.6966991411009" class="label" text-anchor="middle" font-size="10">has-role</text>
<polygon points="210.6066017177982,239.3933982822018 214.14213562373095,228.78679656440357 221.21320343559643,235.85786437626905" fill="#666"/>
<line x1="300.0" y1="150.0" x2="210.6066017177982" y2="239.3933982822018" class="edge"/>
<text x="255.3033008588991" y="184.6966991411009" class="label" text-anchor="middle" font-size="10">conveys</text>
<polygon points="200.0,235.0 195.0,225.0 205.0,225.0" fill="#666"/>
<line x1="200.0" y1="50.0" x2="200.0" y2="235.0" class="edge"/>
<text x="200.0" y="132.5" class="label" text-anchor="middle" font-size="10">can-assign</text>
<polygon points="110.60660171779821,139.3933982822018 114.14213562373095,128.78679656440357 121.21320343559643,135.85786437626905" fill="#666"/>
<line x1="200.0" y1="50.0" x2="110.60660171779821" y2="139.3933982822018" class="edge"/>
<text x="155.3033008588991" y="84.6966991411009" class="label" text-anchor="middle" font-size="10">signs-assignment</text>
<polygon points="189.3933982822018,239.3933982822018 178.78679656440357,235.85786437626905 185.85786437626905,228.78679656440357" fill="#666"/>
<line x1="100.0" y1="150.0" x2="189.3933982822018" y2="239.3933982822018" class="edge"/>
<text x="144.6966991411009" y="184.6966991411009" class="label" text-anchor="middle" font-size="10">has-role</text>
<circle cx="200.0" cy="50.0" r="20" class="vertex signer"/>
<text x="200.0" y="55.0" class="label" text-anchor="middle">signer</text>
<circle cx="300.0" cy="150.0" r="20" class="vertex"/>
<text x="300.0" y="155.0" class="label" text-anchor="middle">role</text>
<circle cx="200.0" cy="250.0" r="20" class="vertex"/>
<text x="200.0" y="255.0" class="label" text-anchor="middle">role</text>
<circle cx="100.0" cy="150.0" r="20" class="vertex"/>
<text x="100.0" y="155.0" class="label" text-anchor="middle">actor</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Complete ARBAC97 chain: role-assignment → assignment-signature. The admin's role gives can-assign authority (role-assignment), which backs their signature on Bob's role assignment (assignment-signature).
        </div>

        <p>
            <strong>Expected violations:</strong> 0<br>
            <strong>Actual violations:</strong> 0
        </p>
    </div>

    <div class="demo pass">
        <h2>Demo 3: Invalid: Assignment-Signature Without Role-Assignment</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">Assignment-signature face exists without role-assignment face sharing can-assign edge - NOT allowed!</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="279.1025403784439,187.00961894323342 269.7724133595217,180.84936490538902 278.4326673973661,175.84936490538902" fill="#666"/>
<line x1="200.0" y1="50.0" x2="279.1025403784439" y2="187.00961894323342" class="edge"/>
<text x="239.55127018922195" y="108.50480947161671" class="label" text-anchor="middle" font-size="10">signs-assignment</text>
<polygon points="128.39745962155615,200.00000000000003 138.39745962155615,195.00000000000003 138.39745962155615,205.00000000000003" fill="#666"/>
<line x1="286.6025403784439" y1="200.0" x2="128.39745962155615" y2="200.00000000000003" class="edge"/>
<text x="207.50000000000003" y="190.0" class="label" text-anchor="middle" font-size="10">has-role</text>
<polygon points="120.89745962155615,187.00961894323345 121.56733260263395,175.84936490538905 130.22758664047834,180.84936490538905" fill="#666"/>
<line x1="200.0" y1="50.0" x2="120.89745962155615" y2="187.00961894323345" class="edge"/>
<text x="160.44872981077808" y="108.50480947161672" class="label" text-anchor="middle" font-size="10">can-assign</text>
<circle cx="200.0" cy="50.0" r="20" class="vertex signer"/>
<text x="200.0" y="55.0" class="label" text-anchor="middle">signer</text>
<circle cx="286.6025403784439" cy="200.0" r="20" class="vertex"/>
<text x="286.6025403784439" y="205.0" class="label" text-anchor="middle">actor</text>
<circle cx="113.39745962155615" cy="200.00000000000003" r="20" class="vertex"/>
<text x="113.39745962155615" y="205.00000000000003" class="label" text-anchor="middle">role</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> VIOLATION: Assignment-signature face exists without a corresponding role-assignment face sharing the can-assign edge. You can't sign a role assignment without role-based authority.
        </div>

        <p>
            <strong>Expected violations:</strong> 1<br>
            <strong>Actual violations:</strong> 1
        </p>

        <div class="violations">
            <h4>Violations Found:</h4>
            <ul>
                <li><code>[ERROR] assignment_signature_requires_role_assignment: No role-assignment face shares can-assign edge 'e:can-assign:admin-target' - admin must have assignment authority (f:assignment-signature:orphan)</code></li>

            </ul>
        </div>
    </div>

    <div class="demo pass">
        <h2>Demo 4: Invalid: Role-Assignment Missing Conveys Edge</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">Role-assignment face missing conveys edge - required edge type missing</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="279.1025403784439,187.00961894323342 269.7724133595217,180.84936490538902 278.4326673973661,175.84936490538902" fill="#666"/>
<line x1="200.0" y1="50.0" x2="279.1025403784439" y2="187.00961894323342" class="edge"/>
<text x="239.55127018922195" y="108.50480947161671" class="label" text-anchor="middle" font-size="10">has-role</text>
<polygon points="128.39745962155615,200.00000000000003 138.39745962155615,195.00000000000003 138.39745962155615,205.00000000000003" fill="#666"/>
<line x1="286.6025403784439" y1="200.0" x2="128.39745962155615" y2="200.00000000000003" class="edge"/>
<text x="207.50000000000003" y="190.0" class="label" text-anchor="middle" font-size="10">other</text>
<polygon points="120.89745962155615,187.00961894323345 121.56733260263395,175.84936490538905 130.22758664047834,180.84936490538905" fill="#666"/>
<line x1="200.0" y1="50.0" x2="120.89745962155615" y2="187.00961894323345" class="edge"/>
<text x="160.44872981077808" y="108.50480947161672" class="label" text-anchor="middle" font-size="10">can-assign</text>
<circle cx="200.0" cy="50.0" r="20" class="vertex"/>
<text x="200.0" y="55.0" class="label" text-anchor="middle">actor</text>
<circle cx="286.6025403784439" cy="200.0" r="20" class="vertex"/>
<text x="286.6025403784439" y="205.0" class="label" text-anchor="middle">role</text>
<circle cx="113.39745962155615" cy="200.00000000000003" r="20" class="vertex"/>
<text x="113.39745962155615" y="205.00000000000003" class="label" text-anchor="middle">role</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> VIOLATION: Role-assignment face is missing the 'conveys' edge. It must have has-role, conveys, and can-assign edges.
        </div>

        <p>
            <strong>Expected violations:</strong> 1<br>
            <strong>Actual violations:</strong> 1
        </p>

        <div class="violations">
            <h4>Violations Found:</h4>
            <ul>
                <li><code>[ERROR] role_assignment_boundary_types: Role-assignment face missing required edge types: {'conveys'} (f:role-assignment:bad)</code></li>

            </ul>
        </div>
    </div>

    <div class="demo pass">
        <h2>Demo 5: Valid: Role-Assignment Alone (Authority Pre-exists Assignment)</h2>
        <p class="status pass">✓ PASS</p>
        <p class="description">Role-assignment face exists alone - VALID (authority can pre-exist actual assignment)</p>

        <div class="graph">
            <svg width="400" height="300" viewBox="0 0 400 300">
<polygon points="279.1025403784439,187.00961894323342 269.7724133595217,180.84936490538902 278.4326673973661,175.84936490538902" fill="#666"/>
<line x1="200.0" y1="50.0" x2="279.1025403784439" y2="187.00961894323342" class="edge"/>
<text x="239.55127018922195" y="108.50480947161671" class="label" text-anchor="middle" font-size="10">has-role</text>
<polygon points="128.39745962155615,200.00000000000003 138.39745962155615,195.00000000000003 138.39745962155615,205.00000000000003" fill="#666"/>
<line x1="286.6025403784439" y1="200.0" x2="128.39745962155615" y2="200.00000000000003" class="edge"/>
<text x="207.50000000000003" y="190.0" class="label" text-anchor="middle" font-size="10">conveys</text>
<polygon points="120.89745962155615,187.00961894323345 121.56733260263395,175.84936490538905 130.22758664047834,180.84936490538905" fill="#666"/>
<line x1="200.0" y1="50.0" x2="120.89745962155615" y2="187.00961894323345" class="edge"/>
<text x="160.44872981077808" y="108.50480947161672" class="label" text-anchor="middle" font-size="10">can-assign</text>
<circle cx="200.0" cy="50.0" r="20" class="vertex"/>
<text x="200.0" y="55.0" class="label" text-anchor="middle">actor</text>
<circle cx="286.6025403784439" cy="200.0" r="20" class="vertex"/>
<text x="286.6025403784439" y="205.0" class="label" text-anchor="middle">role</text>
<circle cx="113.39745962155615" cy="200.00000000000003" r="20" class="vertex"/>
<text x="113.39745962155615" y="205.00000000000003" class="label" text-anchor="middle">role</text>
</svg>
        </div>

        <div class="explanation">
            <strong>Rule:</strong> Role-assignment faces CAN exist without assignment-signature faces. They represent can-assign authority that pre-exists any actual role assignment signatures.
        </div>

        <p>
            <strong>Expected violations:</strong> 0<br>
            <strong>Actual violations:</strong> 0
        </p>
    </div>

</body>
</html>
